const laptop = [
  {
    id: 1,
    title: "Acer",
    imageSrc: "./images/ACER.png",
    description:
      "The incredibly fast wireless connection and amazing battery life give you all day to run your favorite Google apps or browse the web, access photos, videos, music and docs.",
    rate: "⭐⭐⭐",
    price: 270,
    Quantity: 1,
  },
  {
    id: 2,
    title: "Apple",
    imageSrc: "./images/APPLE.png",
    description:
      "Apple has a small laptop lineup compared to other brands like Dell, HP, Lenovo, and ASUS, as they only make premium productivity-focused laptops.",
    rate: "⭐⭐⭐⭐⭐",
    price: 540,
    Quantity: 1,
  },
  {
    id: 3,
    title: "ASUS",
    imageSrc: "./images/asus.png",
    description:
      "ASUS is, in short, one of the most revered and innovative manufacturers on the market. Its products are simply phenomenal and are amongst the most sought-after.",
    rate: "⭐⭐⭐",
    price: 70,
    Quantity: 1,
  },
  {
    id: 4,
    title: "Dell",
    imageSrc: "./images/dell.png",
    description:
      "Dell is, in short, one of the most revered and innovative manufacturers on the market. Its products are simply phenomenal and are amongst the most sought-after.",
    rate: "⭐⭐⭐⭐⭐",
    price: 175,
    Quantity: 1,
  },
  {
    id: 5,
    title: "HP",
    imageSrc: "./images/hp.png",
    description:
      "HP is, in short, one of the most revered and innovative manufacturers on the market. Its products are simply phenomenal and are amongst the most sought-after.",
    rate: "⭐⭐⭐⭐",
    price: 350,
    Quantity: 1,
  },
  {
    id: 6,
    title: "Lenovo",
    imageSrc: "./images/lenovo.png",
    description:
      "High-quality components: Lenovo uses high-quality components in its laptops, such as Intel processors, solid-state drives, and high-resolution displays, which have contributed to the performance and durability of the devices.",
    rate: "⭐⭐⭐",
    price: 780,
    Quantity: 1,
  },
];
// !================
const mobile = [
  {
    id: 1,
    title: "I PHONE X",
    imageSrc: "./images/phone1.png",
    description:
      "Your perfect pack for everyday use and walks in the forest. Stash your laptop (up to 2.8 inches) in the padded sleeve, your everyday.",
    rate: "⭐⭐⭐",
    price: 140,
    Quantity: 1,
  },
  {
    id: 2,
    title: "I PHONE 11PRO MAX",
    imageSrc: "./images/IPhone-11-pro-Max-removebg-preview.png",
    description:
      "An original Apple iPhone model will always have an IMEI number. If there is no IMEI number, it is likely that the model is fake.",
    rate: "⭐⭐⭐⭐⭐",
    price: 500,
    Quantity: 1,
  },
  {
    id: 3,
    title: "I PHONE 12PRO MAX",
    imageSrc: "./images/iPhone-12.png",
    description:
      "The Apple iPhone 12 Pro Max (14th Gen) has height of 6.33” (160.8 mm), width of 3.07” (78.1 mm), depth of . 29” (7.4 mm), and weighs 8.03 oz (228 g).",
    rate: "⭐⭐⭐⭐⭐",
    price: 700,
    Quantity: 1,
  },
  {
    id: 4,
    title: "I PHONE 13PRO MAX",
    imageSrc: "./images/iphone-13.png",
    description:
      "The iPhone 13 Pro Max has a battery of 3,095 mAh with video playback of up to 19 hours and audio playback of up to 75 hours.",
    rate: "⭐⭐⭐⭐⭐",
    price: 850,
    Quantity: 1,
  },
  {
    id: 5,
    title: "I PHONE 14PRO MAX",
    imageSrc: "./images/iPhone-14-PNG-Photos-removebg-preview.png",
    description:
      "The iPhone 14 Pro and Pro Max feature a new A16 Bionic system on a chip (SoC), built on TSMC's N4 fabrication process, superseding the A15 Bionic seen on the iPhone 13 and 13 Pro lineup, the 3rd generation iPhone SE, and the iPhone 14 and 14 Plus.",
    rate: "⭐⭐⭐⭐⭐",
    price: 960,
    Quantity: 1,
  },
  {
    id: 6,
    title: "I PHONE 15PRO MAX",
    imageSrc: "./images/p15.png",
    description:
      "Higher Resolution: The iPhone 15 Pro Max packs a 48-megapixel main camera which is a significant upgrade in resolution compared to the iPhone 12's 12-megapixels. Telephoto: Having a telephoto lens is one thing, but you'll be upgrading to a 3× or 5× optical zoom. That's a lot of reach.",
    rate: "⭐⭐⭐⭐⭐",
    price: 24,
    Quantity: 1,
  },
];
// !----------------------
const clothes = [
  {
    id: 1,
    title: "T-Shirt",
    imageSrc: "./images/t1.png",
    description:
      "casual wear and come in various styles, designs, and materials.",
    rate: "⭐⭐⭐",
    price: 15,
    Quantity: 1,
  },
  {
    id: 2,
    title: "Jeans",
    imageSrc: "./images/t2.png",
    description:
      "Denim is a sturdy cotton warp-faced textile in which the weft passes under two or more warp threads. This twill weave produces a diagonal ribbing that distinguishes it from cotton duck.",
    rate: "⭐⭐⭐⭐⭐",
    price: 24,
    Quantity: 1,
  },
  {
    id: 3,
    title: "Necktie",
    imageSrc: "./images/j3.png",
    description:
      "A quality tie is usually made of either 100% pure silk or wool, and while blends of various materials can be found, it's best to steer clear of any man-made fibers such as polyester.",
    rate: "⭐⭐⭐⭐⭐",
    price: 5,
    Quantity: 1,
  },
  {
    id: 4,
    title: "Socks",
    imageSrc: "./images/socks.png",
    description:
      "Crew socks are mid-length and come up to the middle of your calf. They are the most popular sock type because they can be worn with almost anything.",
    rate: "⭐⭐⭐",
    price: 1.5,
    Quantity: 1,
  },
  {
    id: 5,
    title: "Nike",
    imageSrc: "./images/cv.png",
    description:
      "Nike Air is our iconic innovation that uses pressurized air in a durable, flexible membrane to provide lightweight cushioning.",
    rate: "⭐⭐⭐⭐⭐",
    price: 30,
    Quantity: 1,
  },
  {
    id: 6,
    title: "Coat",
    imageSrc: "./images/coat.png",
    description:
      "Definitions of coat. an outer garment that has sleeves and covers the body from shoulder down; worn outdoors.",
    rate: "⭐⭐⭐⭐⭐",
    price: 45,
    Quantity: 1,
  },
];

const allProducts = [
  {
    id: 1,
    title: "I PHONE X",
    imageSrc: "./images/phone1.png",
    description:
      "Your perfect pack for everyday use and walks in the forest. Stash your laptop (up to 2.8 inches) in the padded sleeve, your everyday.",
    rate: "⭐⭐⭐",
    price: 140,
    Quantity: 1,
  },
  {
    id: 2,
    title: "I PHONE 11PRO MAX",
    imageSrc: "./images/IPhone-11-pro-Max-removebg-preview.png",
    description:
      "An original Apple iPhone model will always have an IMEI number. If there is no IMEI number, it is likely that the model is fake.",
    rate: "⭐⭐⭐⭐⭐",
    price: 500,
    Quantity: 1,
  },
  {
    id: 3,
    title: "I PHONE 12PRO MAX",
    imageSrc: "./images/iPhone-12.png",
    description:
      "The Apple iPhone 12 Pro Max (14th Gen) has height of 6.33” (160.8 mm), width of 3.07” (78.1 mm), depth of . 29” (7.4 mm), and weighs 8.03 oz (228 g).",
    rate: "⭐⭐⭐⭐⭐",
    price: 700,
    Quantity: 1,
  },
  {
    id: 4,
    title: "I PHONE 13PRO MAX",
    imageSrc: "./images/iphone-13.png",
    description:
      "The iPhone 13 Pro Max has a battery of 3,095 mAh with video playback of up to 19 hours and audio playback of up to 75 hours.",
    rate: "⭐⭐⭐⭐⭐",
    price: 850,
    Quantity: 1,
  },
  {
    id: 5,
    title: "I PHONE 14PRO MAX",
    imageSrc: "./images/iPhone-14-PNG-Photos-removebg-preview.png",
    description:
      "The iPhone 14 Pro and Pro Max feature a new A16 Bionic system on a chip (SoC), built on TSMC's N4 fabrication process, superseding the A15 Bionic seen on the iPhone 13 and 13 Pro lineup, the 3rd generation iPhone SE, and the iPhone 14 and 14 Plus.",
    rate: "⭐⭐⭐⭐⭐",
    price: 960,
    Quantity: 1,
  },
  {
    id: 6,
    title: "I PHONE 15PRO MAX",
    imageSrc: "./images/p15.png",
    description:
      "Higher Resolution: The iPhone 15 Pro Max packs a 48-megapixel main camera which is a significant upgrade in resolution compared to the iPhone 12's 12-megapixels. Telephoto: Having a telephoto lens is one thing, but you'll be upgrading to a 3× or 5× optical zoom. That's a lot of reach.",
    rate: "⭐⭐⭐⭐⭐",
    price: 24,
    Quantity: 1,
  },
  {
    id: 7,
    title: "Acer",
    imageSrc: "./images/ACER.png",
    description:
      "The incredibly fast wireless connection and amazing battery life give you all day to run your favorite Google apps or browse the web, access photos, videos, music and docs.",
    rate: "⭐⭐⭐",
    price: 270,
    Quantity: 1,
  },
  {
    id: 8,
    title: "Apple",
    imageSrc: "./images/APPLE.png",
    description:
      "Apple has a small laptop lineup compared to other brands like Dell, HP, Lenovo, and ASUS, as they only make premium productivity-focused laptops.",
    rate: "⭐⭐⭐⭐⭐",
    price: 540,
    Quantity: 1,
  },
  {
    id: 9,
    title: "ASUS",
    imageSrc: "./images/asus.png",
    description:
      "ASUS is, in short, one of the most revered and innovative manufacturers on the market. Its products are simply phenomenal and are amongst the most sought-after.",
    rate: "⭐⭐⭐",
    price: 70,
    Quantity: 1,
  },
  {
    id: 10,
    title: "Dell",
    imageSrc: "./images/dell.png",
    description:
      "Dell is, in short, one of the most revered and innovative manufacturers on the market. Its products are simply phenomenal and are amongst the most sought-after.",
    rate: "⭐⭐⭐⭐⭐",
    price: 175,
    Quantity: 1,
  },
  {
    id: 11,
    title: "HP",
    imageSrc: "./images/hp.png",
    description:
      "HP is, in short, one of the most revered and innovative manufacturers on the market. Its products are simply phenomenal and are amongst the most sought-after.",
    rate: "⭐⭐⭐⭐",
    price: 350,
    Quantity: 1,
  },
  {
    id: 12,
    title: "Lenovo",
    imageSrc: "./images/lenovo.png",
    description:
      "High-quality components: Lenovo uses high-quality components in its laptops, such as Intel processors, solid-state drives, and high-resolution displays, which have contributed to the performance and durability of the devices.",
    rate: "⭐⭐⭐",
    price: 780,
    Quantity: 1,
  },
  {
    id: 13,
    title: "T-Shirt",
    imageSrc: "./images/t1.png",
    description:
      "casual wear and come in various styles, designs, and materials.",
    rate: "⭐⭐⭐",
    price: 15,
    Quantity: 1,
  },
  {
    id: 14,
    title: "Jeans",
    imageSrc: "./images/t2.png",
    description:
      "Denim is a sturdy cotton warp-faced textile in which the weft passes under two or more warp threads. This twill weave produces a diagonal ribbing that distinguishes it from cotton duck.",
    rate: "⭐⭐⭐⭐⭐",
    price: 24,
    Quantity: 1,
  },
  {
    id: 15,
    title: "Necktie",
    imageSrc: "./images/j3.png",
    description:
      "A quality tie is usually made of either 100% pure silk or wool, and while blends of various materials can be found, it's best to steer clear of any man-made fibers such as polyester.",
    rate: "⭐⭐⭐⭐⭐",
    price: 5,
    Quantity: 1,
  },
  {
    id: 16,
    title: "Socks",
    imageSrc: "./images/socks.png",
    description:
      "Crew socks are mid-length and come up to the middle of your calf. They are the most popular sock type because they can be worn with almost anything.",
    rate: "⭐⭐⭐",
    price: 1.5,
    Quantity: 1,
  },
  {
    id: 17,
    title: "Nike",
    imageSrc: "./images/cv.png",
    description:
      "Nike Air is our iconic innovation that uses pressurized air in a durable, flexible membrane to provide lightweight cushioning.",
    rate: "⭐⭐⭐⭐⭐",
    price: 30,
    Quantity: 1,
  },
  {
    id: 18,
    title: "Coat",
    imageSrc: "./images/coat.png",
    description:
      "Definitions of coat. an outer garment that has sleeves and covers the body from shoulder down; worn outdoors.",
    rate: "⭐⭐⭐⭐⭐",
    price: 45,
    Quantity: 1,
  },
];
const body = $("body");
let users = [
  { name: "raed", password: "123456" },
  { name: "ahmad", password: "1234567" },
];
localStorage.setItem("users", JSON.stringify(users));
//  console.log(JSON.parse(localStorage.getItem('users')));
console.log(users);
const btnMode = $("#mode");

$("#Basket").html(`My Basket (${localStorage.getItem("totalQuantity") || 0})`);

$("#searchBtn").on("click", function () {
  let inputValue = $("#inputSearch").val().toLowerCase();
  let objectResult = allProducts.filter((elem) => {
    return elem.title.toLowerCase().includes(inputValue);
  });
  if (inputValue === "") {
    return;
  } else {
    $(".master4").html("").hide(1000);
    // $(".master").html('')
    // $(".master2").html('')
    // $(".master3").html('')

    $(".master2").hide(1000);
    $(".master").hide(1000);
    $(".master3").hide(1000);
    $(".master4").show(1000);

    objectResult.forEach((elem, index) => {
      const item = $(` <div id="${index + 1}"  class="cardbutton">
      <div id="${
        index + 1
      }" class="cardWhenSearch"  title="click for more details">
        <img id="image" src="${elem.imageSrc}" />
        <div>
          <p class="p">${elem.title}</p>
        </div>
        <div id="iconPrice">
          <p class="price">$${elem.price}</p>
          <div class="starIcon">
          <h2>${elem.rate}</h2>
          
          </div>
        </div>
      </div>
      <div id=${index + 1} class="addToCardWhenSearch"><button id=${
        index + 1
      } class="addToCart" >Add To Cart</button></div>
    </div>`);
      $(".master4").append(item);
    });
    // !! for popup laptop------------------------
    $(".cardWhenSearch").on("click", function open() {
      $(".poph2").text(objectResult[$(this)[0].id - 1].title);
      $(".imgPop")[0].src = objectResult[$(this)[0].id - 1].imageSrc;
      $(".detail").text(objectResult[$(this)[0].id - 1].description);
      $(".popup").css({
        visibility: "visible",
        transform: "translate(-50%,-50%) scale(1)",
        top: "50%",
      });
      $(".master").css({
        opacity: "0.4",
        "pointer-events": "none",
      });
    });
    // !! -----------for addToCard laptop-----------
    $(".addToCart").on("click", function () {
      const xx = objectResult.find((x) => x.id == $(this)[0].id);
      if (myListProduct.includes(xx)) {
        totalPrice.push(xx.price);
        localStorage.setItem("totalPrice", totalPrice);
        xx.Quantity++;
        localStorage.setItem("myListProduct", JSON.stringify(myListProduct));
      } else {
        myListProduct.push(xx);
        console.log(xx.price);
        totalPrice.push(xx.price);
        localStorage.setItem("myListProduct", JSON.stringify(myListProduct));
        localStorage.setItem("totalPrice", totalPrice);
      }
      const finalQuantity = JSON.parse(
        localStorage.getItem("myListProduct")
      )?.map((ele) => {
        return ele.Quantity;
      });
      const totalQuantity = finalQuantity?.reduce(
        (accumulator, currentValue) => accumulator + currentValue,
        0
      );
      localStorage.setItem("totalQuantity", totalQuantity);
      console.log(totalQuantity);
      $(".arrowBack").css({
        display: "block",
      });
      $("#Basket").html(` My Basket  (${totalQuantity}) `);
    });

    $(".OK").on("click", close);
  }
});

function toggle() {
  if (btnMode.val() === "DarkMode") {
    btnMode.val("LightMode");
    //  ! -----------DARK------------
    $("body").css({
      color: "rgb(75, 65, 65)",
    });
    $(".totalPrice").css({
      color: "white",
    });
    $(".price").css({
      color: "white",
    });
    $(".p").css({
      color: "white",
    });
    $(".master2").css({
      "background-color": "rgb(75, 65, 65)",
    });
    $(".master3").css({
      "background-color": "rgb(75, 65, 65)",
    });
    $(".master4").css({
      "background-color": "rgb(75, 65, 65)",
    });
    $("#searchBtn").css({
      "background-color": "goldenrod",
    });
    $("#header").css({
      "background-color": " goldenrod",
    });
    $("P").css({
      " color": " goldenrod",
    });
    $(".master").css({
      "background-color": " rgb(75, 65, 65)",
    });
    $(".logoSearch").css({
      "background-color": " rgb(75, 65, 65)",
    });
    $(".arrowBack").css({
      "background-color": " transparent",
    });
    $(".myCart").css({
      "background-color": " rgb(75, 65, 65)",
    });
    $(".pft").css({
      "background-color": " #c2d9ff",
    });
    $(".addToCart").css({
      "background-color": " goldenrod",
    });
    $(".link").css({
      "background-color": " goldenrod",
    });
    btnMode.css({
      "background-color": " goldenrod",
    });
  } else if (btnMode.val() === "LightMode") {
    btnMode.val("DarkMode");
    // body.css({
    //   "background-color": " white",
    // });
    // !! --------------LIGHT------------
    $(".totalPrice").css({
      color: "black",
    });
    $(".price").css({
      color: "black",
    });
    $(".p").css({
      color: "black",
    });
    $(".myCart").css({
      "background-color": "white",
    });
    $(".master2").css({
      "background-color": "white",
    });
    $(".master3").css({
      "background-color": "white",
    });
    $(".master4").css({
      "background-color": "white",
    });
    $("#header").css({
      "background-color": "var(--button) ",
    });
    $(".master").css({
      "background-color": "white",
    });
    $(".logoSearch").css({
      "background-color": "white",
    });
    $(".arrowBack").css({
      "background-color": " transparent",
    });

    $(".pft").css({
      "background-color": " #c2d9ff",
    });
    $(".addToCart").css({
      "background-color": "  var(--button)",
    });
    $(".link").css({
      "background-color": "  var(--button)",
    });
    btnMode.css({
      "background-color": " var(--button)",
    });
    $("#searchBtn").css({
      "background-color": " var(--button)",
    });
    $("p").css({
      " color": " goldenrod",
    });
  }
}

function close() {
  $(".popup").css("visibility", "hidden");
  $(".master").css({
    opacity: "1",
    "pointer-events": "auto",
  });
}

let totalPrice = [] || 0;
const myListProduct = JSON.parse(localStorage.getItem("myListProduct")) || [];

let aa = 0;

// !! --------render laptop-------------

const redlaptop = () => {
  laptop.forEach((elem, index) => {
    const item = $(` <div id="${index + 1}"  class="cardbutton">
    <div id="${index + 1}" class="card"  title="click for more details">
      <img id="image" src="${elem.imageSrc}" />
      <div>
        <p class="p">${elem.title}</p>
      </div>
      <div id="iconPrice">
        <p class="price">$${elem.price}</p>
        <div class="starIcon">
        <h2>${elem.rate}</h2>
        
        </div>
      </div>
    </div>
    <div id=${index + 1} class="addToCard"><button id=${
      index + 1
    } class="addToCart" >Add To Cart</button></div>
  </div>`);
    $(".master").append(item);
  });
  // !! for popup laptop------------------------
  $(".card").on("click", function open() {
    $(".poph2").text(laptop[$(this)[0].id - 1].title);
    $(".imgPop")[0].src = laptop[$(this)[0].id - 1].imageSrc;
    $(".detail").text(laptop[$(this)[0].id - 1].description);
    $(".popup").css({
      visibility: "visible",
      transform: "translate(-50%,-50%) scale(1)",
      top: "50%",
    });
    $(".master").css({
      opacity: "0.4",
      "pointer-events": "none",
    });
  });
  // !! -----------for addToCard laptop-----------

  $(".addToCard").on("click", function () {
    // get key loginedInUser
    // if exist => cont
    // else show popup
    const xx = laptop.find((x) => x.id == $(this)[0].id);
    if (myListProduct.includes(xx)) {
      totalPrice.push(xx.price);
      localStorage.setItem("totalPrice", totalPrice);
      xx.Quantity++;
      localStorage.setItem("myListProduct", JSON.stringify(myListProduct));
    } else {
      myListProduct.push(xx);

      totalPrice.push(xx.price);
      localStorage.setItem("myListProduct", JSON.stringify(myListProduct));
      localStorage.setItem("totalPrice", totalPrice);
    }
    const finalQuantity = JSON.parse(
      localStorage.getItem("myListProduct")
    )?.map((ele) => {
      return ele.Quantity;
    });
    const totalQuantity = finalQuantity?.reduce(
      (accumulator, currentValue) => accumulator + currentValue,
      0
    );
    localStorage.setItem("totalQuantity", totalQuantity);
    console.log(totalQuantity);
    $(".arrowBack").css({
      display: "block",
    });
    $("#Basket").html(` My Basket  (${totalQuantity}) `);
  });

  $(".OK").on("click", close);
};
// !============== render mobile ==============
const renderMobile = () => {
  mobile.forEach((elem, index) => {
    const item = $(` <div id="${index + 1}"  class="cardbutton">
    <div id="${index + 1}" class="cardMobile"  title="click for more details">
      <img id="image" src="${elem.imageSrc}" />
      <div>
        <p class="p">${elem.title}</p>
      </div>
      <div id="iconPrice">
        <p class="price">$${elem.price}</p>
        <div class="starIcon">
        <h2>${elem.rate}</h2>
        
        </div>
      </div>
    </div>
    <div id=${index + 1} class="addToCard1"><button id=${
      index + 1
    } class="addToCart" >Add To Cart</button></div>
  </div>`);
    $(".master2").append(item);
  });
  // !! for popup mobile------------------------
  $(".cardMobile").on("click", function open() {
    $(".poph2").text(mobile[$(this)[0].id - 1].title);
    $(".imgPop")[0].src = mobile[$(this)[0].id - 1].imageSrc;
    $(".detail").text(mobile[$(this)[0].id - 1].description);
    $(".popup").css({
      visibility: "visible",
      transform: "translate(-50%,-50%) scale(1)",
      top: "50%",
    });
    $(".master").css({
      opacity: "0.4",
      "pointer-events": "none",
    });
  });
  // !! -----------for addToCard mobile-----------
  $(".addToCard1").on("click", function () {
    const xx = mobile.find((x) => x.id == $(this)[0].id);
    if (myListProduct.includes(xx)) {
      totalPrice.push(xx.price);
      localStorage.setItem("totalPrice", totalPrice);
      xx.Quantity++;
      localStorage.setItem("myListProduct", JSON.stringify(myListProduct));
    } else {
      myListProduct.push(xx);

      totalPrice.push(xx.price);
      localStorage.setItem("myListProduct", JSON.stringify(myListProduct));
      localStorage.setItem("totalPrice", totalPrice);
    }
    const finalQuantity = JSON.parse(
      localStorage.getItem("myListProduct")
    )?.map((ele) => {
      return ele.Quantity;
    });
    const totalQuantity = finalQuantity?.reduce(
      (accumulator, currentValue) => accumulator + currentValue,
      0
    );
    localStorage.setItem("totalQuantity", totalQuantity);
    console.log(totalQuantity);
    $(".arrowBack").css({
      display: "block",
    });

    $("#Basket").html(`My Basket (${totalQuantity})`);
  });

  $(".OK").on("click", close);
};
// !! ----------render clothes-------------
const renderClothes = () => {
  clothes.forEach((elem, index) => {
    const item = $(` <div id="${index + 1}"  class="cardbutton">
    <div id="${index + 1}" class="cardClothes"  title="click for more details">
      <img id="image" src="${elem.imageSrc}" />
      <div>
        <p class="p">${elem.title}</p>
      </div>
      <div id="iconPrice">
        <p class="price">$${elem.price}</p>
        <div class="starIcon">
        <h2>${elem.rate}</h2>
        
        </div>
      </div>
    </div>
    <div id=${index + 1} class="addToCard2"><button id=${
      index + 1
    } class="addToCart" >Add To Cart</button></div>
  </div>`);
    $(".master3").append(item);
  });
  // !! for popup------------------------
  $(".cardClothes").on("click", function open() {
    $(".poph2").text(clothes[$(this)[0].id - 1].title);
    $(".imgPop")[0].src = clothes[$(this)[0].id - 1].imageSrc;
    $(".detail").text(clothes[$(this)[0].id - 1].description);
    $(".popup").css({
      visibility: "visible",
      transform: "translate(-50%,-50%) scale(1)",
      top: "50%",
    });
    $(".master").css({
      opacity: "0.4",
      "pointer-events": "none",
    });
  });
  // !! -----------for addToCard -----------
  $(".addToCard2").on("click", function () {
    const xx = clothes.find((x) => x.id == $(this)[0].id);
    if (myListProduct.includes(xx)) {
      totalPrice.push(xx.price);
      localStorage.setItem("totalPrice", totalPrice);
      xx.Quantity++;
      localStorage.setItem("myListProduct", JSON.stringify(myListProduct));
    } else {
      myListProduct.push(xx);

      totalPrice.push(xx.price);
      localStorage.setItem("myListProduct", JSON.stringify(myListProduct));
      localStorage.setItem("totalPrice", totalPrice);
    }
    const finalQuantity = JSON.parse(
      localStorage.getItem("myListProduct")
    )?.map((ele) => {
      return ele.Quantity;
    });
    const totalQuantity = finalQuantity?.reduce(
      (accumulator, currentValue) => accumulator + currentValue,
      0
    );
    localStorage.setItem("totalQuantity", totalQuantity);
    console.log(totalQuantity);
    $(".arrowBack").css({
      display: "block",
    });

    // $("#Basket")[0].value = ` My Basket  (${totalQuantity}) `;
    $("#Basket").html(`My Basket (${totalQuantity})`);
  });

  $(".OK").on("click", close);
};
// !---------------------
const basketScreen = () => {
  $(".totalPrice").show();
  $(".headerBasket").css({
    display: "flex",
  });
  const finalPrice = JSON.parse(localStorage.getItem("myListProduct"))?.map(
    (ele) => {
      return ele.price * ele.Quantity;
    }
  );

  const sumWithInitial = finalPrice?.reduce(
    (accumulator, currentValue) => accumulator + currentValue,
    0
  );

  $(".arrowBack").css({
    display: "block",
  });
  $("#section").css({
    display: "none",
  });
  $(".myCart").css({
    display: "flex",
  });
  $("#header").css({
    display: "none",
  });
  const basketList = JSON.parse(localStorage.getItem("myListProduct"));
  // debugger
  basketList?.forEach((elem, index) => {
    const final = $(`
    <div id= ${index + 1} class="myProduct">
     
      <div class="pft">
        <p>${elem.price}</p>
        <p>${elem.Quantity} </p>
        <p>${elem.price * elem.Quantity}</p>
      </div>
    </div>
`);
    const myTrash = $(` <div class="imgTrash" id = imgTrash_${index + 1}>
<img class="imgbask" src=${JSON.stringify(elem.imageSrc)}/>
</div>`);
    const deleteBtn = $(
      `<button class="bt"><i class="fa-solid fa-trash-can"></i></button> `
    );
    deleteBtn.on("click", function () {
      const productIdToRemove = elem.id;

      const indexToRemove = basketList.findIndex(
        (product) => product.id === productIdToRemove
      );

      if (indexToRemove !== -1) {
        basketList.splice(indexToRemove, 1);
        totalPrice.splice(indexToRemove, 1);

        localStorage.setItem("myListProduct", JSON.stringify(basketList));
        localStorage.setItem("totalPrice", JSON.stringify(totalPrice));

        $(this).closest(".myProduct").remove();

        if (basketList.length === 0) {
          localStorage.clear();
          $(".totalPrice").text("Total Price" + " " + 0);
        } else {
          const finalPrice = basketList.map((ele) => ele.price * ele.Quantity);

          const sumWithInitial = finalPrice?.reduce(
            (accumulator, currentValue) => accumulator + currentValue,
            0
          );

          $(".totalPrice").text("Total Price" + " " + sumWithInitial);

          const finalQuantity = basketList.map((ele) => ele.Quantity);
          const totalQuantity = finalQuantity?.reduce(
            (accumulator, currentValue) => accumulator + currentValue,
            0
          );
          localStorage.setItem("totalQuantity", totalQuantity);
          $("#Basket")[0].value = ` My Basket  (${totalQuantity}) `;
        }
      }
    });
     final.prepend(myTrash);
     myTrash.append(deleteBtn)
    // $(`.imgTrash`).append(deleteBtn);
    // final.append(deleteBtn)
    $(".myCart").append(final);
  });
  for (let index = 0; index < totalPrice.length; index++) {
    aa += totalPrice[index];
    localStorage.setItem("aa", aa);
  }
  $(".totalPrice").text("Total Price" + " " + sumWithInitial);
};
$("#Basket").on("click", function () {
  basketScreen();
});
const hide = function () {
  $(".totalPrice").hide();
  $(".myCart").hide();
  $(".arrowBack").hide();
  $(".headerBasket").hide();
  $(".myProduct").hide(1000);
  $("#section").css({
    display: "grid",
  });
  $("#header").css({
    display: "flex",
  });
};
redlaptop(laptop);
renderMobile(mobile);
renderClothes(clothes);
// allProduct(allProducts)
$(".master").hide();
$(".master3").hide();
$(".master4").hide();
$("#mobile").on("click", function () {
  $(".master2").show();
  $(".master").hide();
  $(".master3").hide();
  $(".master4").hide();
});
$("#laptop").on("click", function () {
  $(".master").show();
  $(".master2").hide();
  $(".master3").hide();
  $(".master4").hide();
});
$("#clothes").on("click", function () {
  $(".master3").show();
  $(".master").hide();
  $(".master2").hide();
  $(".master4").hide();
});
$("#order").on("click", function () {
  $("#checkOut").css({
    display: "flex",
    visibility: "visible",
    transform: "translate(-50%,-50%) scale(1)",
    top: "50%",
  });
});
function closeOrder() {
  $("#checkOut").css("visibility", "hidden");
  $(".totalPrice").hide(1000);
  $(".myCart").hide(1000);
  $(".arrowBack").hide(1000);
  $(".headerBasket").hide(1000);
  $(".myProduct").hide(1000);
  $("#section").css({
    display: "grid",
  });
  $("#header").css({
    display: "flex",
  });
}
$(".submit").on("click", closeOrder);
$(".Continue").on("click", function () {
  let userNameInput = {
    name: $(".UserName").val(),
    password: $(".Password").val(),
  };
  localStorage.setItem("userNameInput", JSON.stringify(userNameInput));

  users.push(JSON.parse(localStorage.getItem("userNameInput")));
  localStorage.setItem("users", JSON.stringify(users));
  users;
});
